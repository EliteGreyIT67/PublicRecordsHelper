<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Public Records Request Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="css/custom.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50" x-data="publicRecordsApp()" x-init="init()">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold text-gray-900">Public Records Request Generator</h1>
                    <p class="text-sm text-gray-600 mt-1">Generate professional public records requests with proper legal citations</p>
                </div>
                <button @click="startOver()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition-colors">
                    <i class="fas fa-refresh mr-2"></i>Start Over
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Form Section -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">Request Details</h2>
                
                <!-- Template Selection -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Quick Templates</label>
                    <select x-model="selectedTemplate" @change="applyTemplate()" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select a template...</option>
                        <template x-for="template in templates" :key="template.id">
                            <option :value="template.id" x-text="template.name"></option>
                        </template>
                    </select>
                </div>

                <!-- Personal Information -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Your Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                            <input type="text" x-model="form.requesterName" placeholder="John Doe" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address *</label>
                            <input type="email" x-model="form.requesterEmail" placeholder="john@example.com" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                            <input type="tel" x-model="form.requesterPhone" placeholder="(555) 123-4567" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Organization (if applicable)</label>
                            <input type="text" x-model="form.requesterOrganization" placeholder="News Organization" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Mailing Address</label>
                        <textarea x-model="form.requesterAddress" placeholder="123 Main St, City, State 12345" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                </div>

                <!-- Agency Information -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Agency Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">State *</label>
                            <select x-model="form.state" @change="updateStateCitation()" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                                <option value="">Select a state...</option>
                                <template x-for="state in states" :key="state.code">
                                    <option :value="state.code" x-text="state.name"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Agency Name *</label>
                            <input type="text" x-model="form.agencyName" placeholder="City Police Department" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Department (if applicable)</label>
                            <input type="text" x-model="form.agencyDepartment" placeholder="Records Division" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Records Officer/Contact</label>
                            <input type="text" x-model="form.agencyContact" placeholder="Records Officer" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Agency Address</label>
                        <textarea x-model="form.agencyAddress" placeholder="456 Government St, City, State 12345" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                </div>

                <!-- Request Details -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Request Details</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Subject Line *</label>
                        <input type="text" x-model="form.subject" placeholder="Public Records Request - Police Report" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Records Description *</label>
                        <textarea x-model="form.recordsDescription" placeholder="I am requesting copies of all police reports related to incident #12345 that occurred on January 1, 2025, including any supplemental reports, witness statements, and photographs." rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date Range (From)</label>
                            <input type="date" x-model="form.dateFrom" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date Range (To)</label>
                            <input type="date" x-model="form.dateTo" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Preferred Format</label>
                        <div class="flex flex-wrap gap-4">
                            <label class="flex items-center">
                                <input type="radio" x-model="form.preferredFormat" value="electronic" class="mr-2">
                                <span class="text-sm">Electronic (PDF/Email)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" x-model="form.preferredFormat" value="paper" class="mr-2">
                                <span class="text-sm">Paper Copies</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" x-model="form.preferredFormat" value="inspection" class="mr-2">
                                <span class="text-sm">Inspection Only</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Additional Options -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Additional Options</h3>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="checkbox" x-model="form.expeditedProcessing" class="mr-2">
                            <span class="text-sm">Request expedited processing</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" x-model="form.feeWaiverRequest" class="mr-2">
                            <span class="text-sm">Request fee waiver (public interest)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" x-model="form.publicInterest" class="mr-2">
                            <span class="text-sm">This request serves the public interest</span>
                        </label>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Additional Notes</label>
                        <textarea x-model="form.additionalNotes" placeholder="Any additional context or special instructions..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-semibold text-gray-900">Letter Preview</h2>
                    <div class="flex gap-2">
                        <button @click="copyToClipboard()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm transition-colors">
                            <i class="fas fa-copy mr-2"></i>Copy
                        </button>
                        <button @click="exportAsText()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm transition-colors">
                            <i class="fas fa-download mr-2"></i>TXT
                        </button>
                        <button @click="exportAsPDF()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm transition-colors">
                            <i class="fas fa-file-pdf mr-2"></i>PDF
                        </button>
                    </div>
                </div>
                
                <!-- Letter Content -->
                <div id="letterPreview" class="border border-gray-200 rounded-md p-6 bg-white min-h-96 font-mono text-sm leading-relaxed">
                    <div class="letter-content">
                        <!-- Date -->
                        <div class="mb-6 text-right" x-text="getCurrentDate()"></div>
                        
                        <!-- Agency Address -->
                        <div class="mb-6">
                            <template x-if="form.agencyContact">
                                <div x-text="form.agencyContact"></div>
                            </template>
                            <template x-if="form.agencyName">
                                <div x-text="form.agencyName"></div>
                            </template>
                            <template x-if="form.agencyDepartment">
                                <div x-text="form.agencyDepartment"></div>
                            </template>
                            <template x-if="form.agencyAddress">
                                <div x-html="form.agencyAddress.replace(/\n/g, '<br>')"></div>
                            </template>
                        </div>
                        
                        <!-- Subject Line -->
                        <div class="mb-6">
                            <strong>RE: <span x-text="form.subject || 'Public Records Request'"></span></strong>
                        </div>
                        
                        <!-- Salutation -->
                        <div class="mb-4">
                            <template x-if="form.agencyContact">
                                <span>Dear <span x-text="form.agencyContact"></span>,</span>
                            </template>
                            <template x-if="!form.agencyContact">
                                <span>To Whom It May Concern:</span>
                            </template>
                        </div>
                        
                        <!-- Opening paragraph -->
                        <div class="mb-4">
                            I am writing to request access to public records under 
                            <span x-text="getStateCitation()"></span>. 
                            <template x-if="form.requesterOrganization">
                                I am making this request on behalf of <span x-text="form.requesterOrganization"></span>.
                            </template>
                        </div>
                        
                        <!-- Records description -->
                        <div class="mb-4">
                            <strong>Specifically, I am requesting:</strong>
                        </div>
                        <div class="mb-4 pl-4">
                            <span x-text="form.recordsDescription || 'Please describe the records you are requesting...'"></span>
                            
                            <template x-if="form.dateFrom || form.dateTo">
                                <div class="mt-2">
                                    <strong>Date Range:</strong>
                                    <template x-if="form.dateFrom && form.dateTo">
                                        <span x-text="formatDate(form.dateFrom) + ' to ' + formatDate(form.dateTo)"></span>
                                    </template>
                                    <template x-if="form.dateFrom && !form.dateTo">
                                        <span>From <span x-text="formatDate(form.dateFrom)"></span></span>
                                    </template>
                                    <template x-if="!form.dateFrom && form.dateTo">
                                        <span>Through <span x-text="formatDate(form.dateTo)"></span></span>
                                    </template>
                                </div>
                            </template>
                        </div>
                        
                        <!-- Format preference -->
                        <template x-if="form.preferredFormat">
                            <div class="mb-4">
                                I would prefer to receive these records in 
                                <span x-text="getFormatPreference()"></span> format.
                            </div>
                        </template>
                        
                        <!-- Fee waiver request -->
                        <template x-if="form.feeWaiverRequest">
                            <div class="mb-4">
                                I request that any fees associated with this request be waived as this information is being sought in the public interest and will contribute to public understanding of government operations.
                            </div>
                        </template>
                        
                        <!-- Expedited processing -->
                        <template x-if="form.expeditedProcessing">
                            <div class="mb-4">
                                I request expedited processing of this request due to its time-sensitive nature.
                            </div>
                        </template>
                        
                        <!-- Additional notes -->
                        <template x-if="form.additionalNotes">
                            <div class="mb-4">
                                <span x-text="form.additionalNotes"></span>
                            </div>
                        </template>
                        
                        <!-- Legal requirements -->
                        <div class="mb-4">
                            <span x-text="getLegalRequirements()"></span>
                        </div>
                        
                        <!-- Contact information -->
                        <div class="mb-4">
                            If you have any questions about this request, please contact me at 
                            <span x-text="form.requesterEmail || 'your-email@example.com'"></span>
                            <template x-if="form.requesterPhone">
                                or <span x-text="form.requesterPhone"></span>
                            </template>.
                        </div>
                        
                        <!-- Closing -->
                        <div class="mb-6">
                            Thank you for your time and consideration.
                        </div>
                        
                        <div class="mb-4">
                            Sincerely,
                        </div>
                        
                        <!-- Signature block -->
                        <div class="mb-2">
                            <span x-text="form.requesterName || 'Your Name'"></span>
                        </div>
                        <template x-if="form.requesterOrganization">
                            <div class="mb-2">
                                <span x-text="form.requesterOrganization"></span>
                            </div>
                        </template>
                        <template x-if="form.requesterAddress">
                            <div class="mb-2">
                                <span x-html="form.requesterAddress.replace(/\n/g, '<br>')"></span>
                            </div>
                        </template>
                        <div class="mb-2">
                            <span x-text="form.requesterEmail || 'your-email@example.com'"></span>
                        </div>
                        <template x-if="form.requesterPhone">
                            <div class="mb-2">
                                <span x-text="form.requesterPhone"></span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Disclaimer -->
        <div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-md p-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-yellow-800">Legal Disclaimer</h3>
                    <div class="mt-2 text-sm text-yellow-700">
                        <p>This tool provides general information and generates template letters for public records requests. It does not constitute legal advice. Laws vary by jurisdiction, and specific circumstances may require different approaches. Consult with a qualified attorney for legal advice specific to your situation.</p>
                        <p class="mt-2"><strong>Privacy Notice:</strong> All processing is done locally in your browser. No data is transmitted to external servers or stored by this application.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/pdf-generator.js"></script>
</body>
</html>
